<head>
    <script src="plotly-min.js"></script>
</head>
<body>
<!-- Plotly chart will be drawn inside this div -->
<div id="plotly-bars"></div>
<div id="plotly-rsi"></div>
<div id="plotly-values"></div>

<script>

  const dates = "%DATES%";
  var candles = {

    x: dates,

    close: "%CLOSE%",

    decreasing: {line: {color: '#7F7F7F'}},

    high: "%HIGH%",

    increasing: {line: {color: '#17BECF'}},

    line: {color: 'rgba(31,119,180,1)'},

    low: "%LOW%",

    open: "%OPEN%",

    type: 'ohlc',
    xaxis: 'x',
    yaxis: 'y'
  };

  const highest = {
    x: dates,
    y: "%TOP%",
    type: "scatter",
    line: {color: '#4286f4'}
  };

  const high = {
      x: dates,
      y: "%HIGHBAND%",
      type: "scatter",
    line: {color: '#6af441'}
  };

  const mid = {
    x: dates,
    y: "%MID%",
    type: "scatter",
    line: {color: '#f44341'}
  };

  const low = {
      x: dates,
      y: "%LOWBAND%",
    type: "scatter",
    line: {color: '#6af441'}
  };

  const bottom = {
      x: dates,
      y: "%BOTTOM%",
    type: "scatter",
    line: {color: '#4286f4'}
  };


  const buys = {
    //j03m finish me
    y: "%BUYS%",
    x: "%BUYDATES%",
    mode: "markers",
    type: 'scatter',
    marker: {
      size: 10,
      color: "#6df441"
    }
  };

  const sells = {
      //j03m finish me
    y: "%SELLS%",
    x: "%SELLDATES%",
    mode: "markers",
    type: 'scatter',
    marker: {
      size: 10,
      color: "#f44141"
    }
  };


  var data = [candles, highest, high, mid, low, bottom, buys, sells];
  //var data = [candles, highest, mid, bottom];


  var layout = {
    dragmode: 'zoom',
    margin: {
      r: 10,
      t: 25,
      b: 40,
      l: 60
    },
    showlegend: false,
    xaxis: {
      autorange: true,
      domain: [0, 1],
      range: ['"%START%"', '"%END%"'],
      rangeslider: {range: ['"%START%"', '"%END%"']},
      title: 'Date',
      type: 'date'
    },
    yaxis: {
      autorange: true,
      domain: [0, 1],
      type: 'linear'
    }
  };

  var layoutValue = {
    dragmode: 'zoom',
    margin: {
      r: 10,
      t: 25,
      b: 40,
      l: 60
    },
    showlegend: false,
    xaxis: {
      autorange: true,
      domain: [0, 1],
      range: ['"%START%"', '"%END%"'],
      rangeslider: {range: ['"%START%"', '"%END%"']},
      title: 'Date',
      type: 'date'
    },
    yaxis: {
      autorange: true,
      domain: [0, 1],
      type: 'linear'
    }
  };


  var layoutRSI = {
    dragmode: 'zoom',
    margin: {
      r: 10,
      t: 25,
      b: 40,
      l: 60
    },
    showlegend: false,
    xaxis: {
      autorange: true,
      domain: [0, 1],
      range: ['"%START%"', '"%END%"'],
      rangeslider: {range: ['"%START%"', '"%END%"']},
      title: 'Date',
      type: 'date'
    },
    yaxis: {
      autorange: true,
      domain: [0, 1],
      type: 'linear'
    }
  };

  const hold = {
    x: "%VALUEDATES%",
    y: "%HODL%",
    type: "scatter",
    line: {color: '#4286f4'}
  };

  const trade = {
    x: "%VALUEDATES%",
    y: "%TRDED%",
    type: "scatter",
    line: {color: '#129634'}
  };

  const orig = {
    x: "%VALUEDATES%",
    y: "%ORIG%",
    type: "scatter",
    line: {color: '#F29634'}
  };

  const rsi = {
    x: dates,
    y: "%RSI%",
    type: "scatter",
    line: {color: '#C1FF3F'}
  };


  const values = [hold, trade, orig];

  Plotly.plot('plotly-bars', data, layout);
  Plotly.plot('plotly-values', values, layoutValue);
  Plotly.plot('plotly-rsi', [rsi], layoutRSI);
</script>
</body>
</html>